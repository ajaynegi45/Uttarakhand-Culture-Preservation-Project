// src/data/festivals.js
const currentYear = new Date().getFullYear();

// NOTE: image properties are strings relative to your public/ directory.
// Put the referenced images in your project's public/ folder (e.g. public/Ghee_Sankranti.jpeg)
export const festivals = [
    {
        date: "14-01",
        title: "Ghughutiya",
        subTitle: {
            date: `14 JANUARY ${currentYear}`,
            location: "UTTARAKHAND",
        },
        description:
            "It marks the transition of the sun into Capricorn (Makar Rashi) and the start of longer days. In Uttarakhand, it is celebrated with great joy and enthusiasm, especially in the hill areas. People gather in open fields to fly kites, bonfires are lit, and people prepare traditional sweets. Devotees take a holy dip in the Ganges or other rivers, believing it cleanses their sins.",
    },
    {
        date: "15-03",
        title: "Phool Dei",
        subTitle: {
            date: `15 MARCH ${currentYear}`,
            location: "UTTARAKHAND",
        },
        description:
            "Phool Dei is a traditional harvest festival celebrated in the Kumaon and Garhwal regions. Young girls go from house to house singing and offering jaggery, rice, and coconut.",
    },
    {
        date: "15-04",
        title: "Syalde Bikhauti Mela",
        subTitle: {
            date: `April month each year `,
            location: "UTTARAKHAND",
        },
        description:
            "Syalde Bikhauti Mela is an annual fair held in April-May in the town of Dwarahat (Almora). The Syalde Bikhauti Mela is held in two phases; the first in the Vimandeshwar Temple and the other in the Dwarahat marketplace. During the mela, one can witness folk dances and songs with traditional foliage being adorned by the gathered people. An important ritual, 'Oda Bhetna' refers to the striking of the stone (Oda). As per legend, the ancient times saw people worship their deity in a temple nearby and due to some friction between the followers of the two groups, a brawl broke out that lead to bloodshed. The leader of the group that lost the fight was beheaded and a stone (Oda) was placed near it to commemorate the fallen leader. The numerous traditions on display and the lip-smacking Indian delicacy of 'Jalebi' being an integral part of the fair, the Syalde Bikhauti Mela is one of cultural convergence.",
    },

    {
        date: "15-05",
        title: "Ramman Utsav",
        subTitle: {
            date: `April month each year `,
            location: "UTTARAKHAND",
        },
        description:
            "उत्तराखंड के चमोली जिले के सलूड़ गांव में प्रतिवर्ष वैशाख (अप्रैल) में आयोजित होने वाला उत्सव है। यह उत्सव युनेस्को की विश्व धरोहर सूची में सम्मिलित है। [1] रामायण से जुड़े प्रसंगों के कारण इसे “रम्माण” उत्सव कहते हैं। रामायण को स्थानीय गढ़वाली भाषा मे 'रम्माण' भी बोला जाता है। राम से जुड़े प्रसंगों के कारण इसे लोक शैली में प्रस्तुतिकरण, लोकनाट्य, स्वांग, देवयात्रा, परमपरागत पूजा, अनुष्ठान, भूमियाल देवता की वार्षिक पूजा, गांव के देवताओं की वार्षिक भेट आदि आयोजन इस उत्सव में होते हैं। इसमें विभिन्न चरित्र लकड़ी के मुखौटे पहनते हैं जिन्हें 'पत्तर' कहते हैं। पत्तर शहतूत (केमू ) की लकड़ी पर कलात्मक तरीके से उत्कीर्ण किये होते हैं। रम्माण उत्सव सलूड़ गाँव के अलावा डुंग्री, बरोशी, सेलंग गांवों में भी रम्माण का आयोजन किया जाता है। इसमें सलूड़ गांव का रम्माण ज्यादा लोकप्रिय है। इसका आयोजन सलूड़-डुंग्रा की संयुक्त पंचायत करती है। रम्माण मेला कभी 11 दिन तो कभी 13 दिन तक भी मनाया जाता है। यह विविध कार्यक्रमों, पूजा और अनुष्ठानों की एक शृंखला है। इसमें सामूहिक पूजा, देवयात्रा, लोकनाट्य, नृत्य, गायन, मेला आदि विविध रंगी आयोजन होते हैं। इसमें परम्परागत पूजा-अनुष्ठान तथा मनोरंजक कार्यक्रम भी आयोजित होते है। यह भूम्याल देवता के वार्षिक पूजा का अवसर भी होता है एवं परिवारों और ग्राम-क्षेत्र के देवताओं से भेंट करने का मौका भी होता है। रम्माण, सलूड़ गांव की 500 वर्ष से भी ज्यादा पुरानी परम्परा है। संयुक्त राष्ट्र संघ के संगठन यूनेस्को द्वारा साल 2009 में इस रम्माण को विश्व की सांस्कृतिक धरोहर का दर्जा दिया गया था। ७ जोड़े पारंपरिक ढोल-दमाऊं की थाप पर मोर-मोरनी नृत्य, बण्या-बाणियांण, ख्यालरी, माल नृत्य सबको रोमांचित करने वाला होता है और कुरजोगी सबका मनोरंजन करता है। मान्यता है कि आदिगुरु शंकराचार्य जी ने सनातन धर्म में नई जान फूकने के लिए पूरे देश में चार मठों की स्थापना की। जोशीमठ के आस पास, शंकराचार्य के आदेश पर उनके कुछ शिष्यों ने गांव-गांव में जाकर पौराणिक मुखौटों से नृत्य करके लोगों में चेतना जगाने का प्रयास किया था जो धीरे-धीरे इन क्षेत्रों में इस समाज का अभिन्न अंग बन गया।",
    },
    {
        date: "16-07",
        title: "Harela",
        subTitle: {
            date: `16 JULY ${currentYear}`,
            location: "UTTARAKHAND",
        },
        description:
            "Harela marks the beginning of the rainy season. People make small idols and sow seeds to test seed quality; brothers give gifts to sisters.",

    },
    {
        date: "16-08",
        title: "Ghee Sankranti",
        subTitle: {
            date: `16 AUGUST ${currentYear}`,
            location: "UTTARAKHAND",
        },
        description:
            "Ghee Sankranti (Olgia) marks the onset of the harvesting season. People exchange gifts such as ghee, axes and enjoy special foods.",
    },
    {
        date: "02-10",
        title: "Dussehra (Vijayadashami)",
        subTitle: {
            date: `Tenth day of Navaratri`,
            location: "UTTARAKHAND",
        },
        description:
            "Dussehra commemorates Lord Rama’s victory over Ravana. Ramlila, burning effigies and fairs mark the occasion. Date moves yearly with the lunar calendar.",
    },
    {
        date: "21-10",
        title: "Diwali (Deepawali)",
        subTitle: {
            date: `21 OCTOBER ${currentYear}`,
            location: "UTTARAKHAND",
        },
        description:
            "Diwali — the Festival of Lights — is celebrated across Uttarakhand with diyas, rangoli, fireworks and Lakshmi puja. Date follows the Hindu lunar calendar and changes every year.",
    },
    {
        date: "01-11",
        title: "Egaas Bagwal",
        subTitle: {
            date: `~11 days after Diwali`,
            location: "UTTARAKHAND",
        },
        description:
            "Egaas Bagwal is observed roughly 11 days after Diwali and features singing, dancing and the flaming rope 'Bhailo' tradition.",
    },
];


// अठूड़ी उत्सव : Butter festival Uttarakhand ❤️ IN August





// Return the festival happening today or the next upcoming festival (wraps to next year)
export function getUpcomingFestival() {
    const now = new Date();

    // Normalize 'today' to midnight so comparisons aren't affected by time-of-day.
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

    // Returns milliseconds until the next occurrence of the festival (>= 0).
    const msUntilNext = (festivalDate) => {
        const [day, month] = festivalDate.split("-").map(Number);
        let fest = new Date(now.getFullYear(), month - 1, day);

        // If this year's date has passed, use next year's date
        if (fest.getTime() < today.getTime()) {
            fest.setFullYear(fest.getFullYear() + 1);
        }
        return fest.getTime() - today.getTime();
    };

    const sorted = festivals.slice().sort((a, b) => msUntilNext(a.date) - msUntilNext(b.date));
    const upcoming = sorted[0];

    // ✅ Calculate correct upcoming year
    const [day, month] = upcoming.date.split("-").map(Number);
    let festDate = new Date(now.getFullYear(), month - 1, day);
    if (festDate < today) {
        festDate.setFullYear(festDate.getFullYear() + 1);
    }

    const newYear = festDate.getFullYear();

    // ✅ Update the year in `subTitle.date`
    const dateParts = upcoming.subTitle.date.split(" ");
    dateParts[2] = newYear; // replace the year
    upcoming.subTitle.date = dateParts.join(" ");

    return upcoming;
}
